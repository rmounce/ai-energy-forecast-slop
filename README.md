Scripts almost entirely generated by Gemini 2.5.

Note that scripts in the model directory have only been tested in a Jupyter notebook running in the same context.

TODO:
- Merge the model stuff into a single script that can be invoked to either:
	- Train (e.g. weekly)
	- Predict (e.g. every 30 minutes)
		- Already has most of the data, probably makes sense to call EMHASS MPC directly from here.


Home Assistant is pushing fresh, raw data into InfluxDB v1:
`configuration.yaml`
```
influxdb:
  host: REDACTED
  port: 8086
  database: hass
  username: user
  password: REDACTED
  max_retries: 3
  measurement_attr: domain__device_class
  default_measurement: state
  tags:
    source: hass
```

This is being downsampled into 5m and 30m measurements with continuous queries:
```
> show continuous queries;
name: hass
name                    query
----                    -----
cq_5m_to_30m            CREATE CONTINUOUS QUERY cq_5m_to_30m ON hass BEGIN SELECT mean(mean_value) AS mean_value, min(min_value) AS min_value, max(max_value) AS max_value INTO hass.rp_30m.power_load_30m FROM hass.rp_5m.power_load_5m GROUP BY time(30m), source_metadata_id, entity_id END
cq_raw_to_5m            CREATE CONTINUOUS QUERY cq_raw_to_5m ON hass BEGIN SELECT mean(value) AS mean_value, min(value) AS min_value, max(value) AS max_value INTO hass.rp_5m.power_load_5m FROM hass.rp_raw.sensor__power WHERE entity_id = 'sigen_plant_consumed_power' GROUP BY time(5m), entity_id END
cq_aemo_5m_sa1_to_30m   CREATE CONTINUOUS QUERY cq_aemo_5m_sa1_to_30m ON hass BEGIN SELECT mean(price) AS price, mean(total_demand) AS total_demand, mean(net_interchange) AS net_interchange INTO hass.rp_30m.aemo_dispatch_sa1_30m FROM hass.rp_5m.aemo_dispatch_sa1_5m GROUP BY time(30m) END
cq_aemo_5m_vic1_to_30m  CREATE CONTINUOUS QUERY cq_aemo_5m_vic1_to_30m ON hass BEGIN SELECT mean(price) AS price, mean(total_demand) AS total_demand, mean(net_interchange) AS net_interchange INTO hass.rp_30m.aemo_dispatch_vic1_30m FROM hass.rp_5m.aemo_dispatch_vic1_5m GROUP BY time(30m) END
cq_aemo_5m_nsw1_to_30m  CREATE CONTINUOUS QUERY cq_aemo_5m_nsw1_to_30m ON hass BEGIN SELECT mean(price) AS price, mean(total_demand) AS total_demand, mean(net_interchange) AS net_interchange INTO hass.rp_30m.aemo_dispatch_nsw1_30m FROM hass.rp_5m.aemo_dispatch_nsw1_5m GROUP BY time(30m) END
cq_weather_temp_30m     CREATE CONTINUOUS QUERY cq_weather_temp_30m ON hass BEGIN SELECT mean(value) AS mean_value INTO hass.rp_30m.temperature_adelaide FROM hass.rp_raw.sensor__temperature WHERE entity_id = 'adelaide_west_terrace_ngayirdapira_temp' GROUP BY time(30m), entity_id END
cq_weather_humidity_30m CREATE CONTINUOUS QUERY cq_weather_humidity_30m ON hass BEGIN SELECT mean(value) AS mean_value INTO hass.rp_30m.humidity_adelaide FROM hass.rp_raw.sensor__humidity WHERE entity_id = 'adelaide_west_terrace_ngayirdapira_humidity' GROUP BY time(30m), entity_id END
cq_weather_wind_30m     CREATE CONTINUOUS QUERY cq_weather_wind_30m ON hass BEGIN SELECT mean(value) AS mean_value INTO hass.rp_30m.wind_speed_adelaide FROM hass.rp_raw.sensor__wind_speed WHERE entity_id = 'adelaide_west_terrace_ngayirdapira_wind_speed_kilometre' GROUP BY time(30m), entity_id END
cq_pv_5m_to_30m         CREATE CONTINUOUS QUERY cq_pv_5m_to_30m ON hass BEGIN SELECT mean(mean_value) AS mean_value, min(min_value) AS min_value, max(max_value) AS max_value INTO hass.rp_30m.power_pv_30m FROM hass.rp_5m.power_pv_5m GROUP BY time(30m), source_metadata_id, entity_id END
cq_pv_raw_to_5m         CREATE CONTINUOUS QUERY cq_pv_raw_to_5m ON hass RESAMPLE FOR 1d BEGIN SELECT mean(value) AS mean_value, min(value) AS min_value, max(value) AS max_value INTO hass.rp_5m.power_pv_5m FROM hass.rp_raw.sensor__power WHERE entity_id = 'sigen_plant_pv_power' GROUP BY time(5m), entity_id fill(0) END
cq_aemo_raw_sa1_to_5m   CREATE CONTINUOUS QUERY cq_aemo_raw_sa1_to_5m ON hass BEGIN SELECT mean(value) * 1000 AS price, mean(total_demand) AS total_demand, mean(net_interchange) AS net_interchange INTO hass.rp_5m.aemo_dispatch_sa1_5m FROM hass.rp_raw.sensor__monetary WHERE entity_id = 'aemo_5min_current_price_sa' GROUP BY time(5m) END
cq_aemo_raw_vic1_to_5m  CREATE CONTINUOUS QUERY cq_aemo_raw_vic1_to_5m ON hass BEGIN SELECT mean(value) * 1000 AS price, mean(total_demand) AS total_demand, mean(net_interchange) AS net_interchange INTO hass.rp_5m.aemo_dispatch_vic1_5m FROM hass.rp_raw.sensor__monetary WHERE entity_id = 'aemo_5min_current_price_vic' GROUP BY time(5m) END
cq_aemo_raw_nsw1_to_5m  CREATE CONTINUOUS QUERY cq_aemo_raw_nsw1_to_5m ON hass BEGIN SELECT mean(value) * 1000 AS price, mean(total_demand) AS total_demand, mean(net_interchange) AS net_interchange INTO hass.rp_5m.aemo_dispatch_nsw1_5m FROM hass.rp_raw.sensor__monetary WHERE entity_id = 'aemo_5min_current_price_nsw' GROUP BY time(5m) END
```

